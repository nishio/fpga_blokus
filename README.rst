=============
 FPGA Blokus
=============

マイルストーン

- VGAにカラー出力を出すためにSDRAMでVRAMを作る(Embedded Memoryでは足りない)
- SDRAMをVRAMに使うのはタイミングとかの調整がめんどくさい？画面をボードと手駒表示部に分ければEmbedded Memoryで収まる量になるのでは？
- 初期画面の出力(block.py)
- ボードはたかが14x14に1マスの番兵を加えて225マス、1マスあたり6bit、シフトレジスタ(1350LE、使いすぎ？でもモンテカルロをやる上で合法手の列挙はボトルネック)
- ピースのパターンをROMに入れる
- シフトレジスタを使った合法手判定
- 初手の合法手判定だけ特別ルールなので、それを合法手判定ルーチンに分岐として入れるよりは、列挙してしまったほうが良いのでは。
- Fanout数を減らすためにシフトレジスタのランダムな位置からパターンマッチを生やす(なるべくFanoutが少なくなるように最適化)
- パターンマッチの配置がランダムであることから、探索開始位置をランダムにすれば、結果として選択されるものもおおよそランダム(同じ位置で複数個マッチする可能性があるので厳密には等確率ではないが、たぶん強さにはあんまり関係ない)、これでたぶん100倍程度速くなるはず。
- 交互にランダムに打つ(合法手判定が正しく動いているか確認): バグの再現性のために乱数シードを固定する機能が必要
- ボタンとスイッチで人間がプレイできるようにする(この時点ではAIはただのランダム)
- AIをJavaRockで作れるようにする。AIは別ファイルにして、手軽に切り替えられるようにする。
- モンテカルロ(UCB1)AI プレイアウトを画面に表示しながらやる
- ←UCBが最大である合法手を見つけるルーチンはどうやるのが良いか？合法手は最大で32000個程度。2個ずつ比較したら15クロック？
- ←UCBの計算、まじめにlogやsqrtをやるのは馬鹿らしい。どう手を抜くか？
- モンテカルロ同士で何百回か対戦させて勝率を確認できるようにする AIを改善していくために。
- ←時間を揃えないと平等ではないから一定時間後に割り込んでそこまでのプレイアウトで結論を出させる仕組みが必要

方針

- コア部分はDE0で動くようにする。将来的にDE2などでしか動かないでかいAIを作るにしても、うまく切り離して、DE0しか持っていない人が手軽に試せる状態をキープする。
- コア部分のライセンスはMITライセンスとする。GPLを避けるという意図。

Memo
====

- DE0:  Device Family: CycloneIII, Package: FBGA, Pin count: 484, Speed grade: 6, EP3C16F484C6
- Menu -> Assignment -> Import Assignments -> "pin_assign,csv"
- http://lut.eee.u-ryukyu.ac.jp/dc13/rules.html
- 15200 bps, no parity and 1 stop bit


Reference
=========

- [1] 芹井 滋喜 "超入門！FPGAスタータ・キットDE0で始めるVerilog HDL"
  http://www.amazon.co.jp/dp/478983137X
- [2] 小林 優 "FPGA ボードで学ぶ組込みシステム開発入門　~Altera編~"
  http://www.amazon.co.jp/dp/4774148393
- [3] 三好 健文 "Hello Worldから始めるFPGA入門", インターフェースZERO, No.04
  http://www.amazon.co.jp/dp/478984935X
